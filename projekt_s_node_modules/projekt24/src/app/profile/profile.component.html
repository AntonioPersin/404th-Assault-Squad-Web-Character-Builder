<main>
  <nav class="bold">
    <ul>
      <li><a [routerLink]="['/builder']" >Character builder</a></li>
      <li><a [routerLink]="['']" >My profile</a></li>
      <li><a (click)="logout()">Log out</a></li>
    </ul>
  </nav>
  <section>
    <div>
    <h1>My pilot builds</h1>
      <table class="table">
        <tr class="info">
          <th>Character name</th>
          <th>Mech name</th>
          <th>HP</th>
          <th>AC</th>
          <th>Actions</th>
          <th><button class="btn btn-warning" (click)="filterPilotsFlag=!filterPilotsFlag">Only show my builds</button></th>
        </tr>
        <tr class="gray"  *ngFor="let pPilot of pPilots | filtriranje:filterPilotsFlag:currUser.id">
          <td class="highlight" [routerLink]="[pPilot.id]">{{pPilot.pPilotName}}</td>
          <td>{{pPilot.pPilotMechName}}</td>
          <td>{{pPilot.pPilotHP}}</td>
          <td>{{pPilot.pPilotAC}}</td>
          <td>{{pPilot.pPilotTURN}}</td>
          <td><button class="btn btn-danger" *ngIf="pPilot.userId==currUser.id" (click)="onpPilotDelete(pPilot.id)">Delete</button></td>
        </tr>
      </table>
    </div>
    <br>
    <br>
    <br>
    <div>
    <h1>My mech builds</h1>
      <table class="table">
        <tr class="info">
          <th>Mech name</th>
          <th>Pilot name</th>
          <th>HP</th>
          <th>AC</th>
          <th>Core</th>
          <th><button class="btn btn-warning" (click)="filterMechsFlag=!filterMechsFlag">Only show my builds</button></th>
        </tr>
        <tr class="gray" *ngFor="let pMech of pMechs">
          <td class="highlight" [routerLink]="[pMech.id]">{{pMech.pMechName}}</td>
          <td>{{pMech.pMechPilotName}}</td>
          <td>{{pMech.pMechHP}}</td>
          <td>{{pMech.pMechAC}}</td>
          <td>{{pMech.pMechCore}}</td>
          <td><button class="btn btn-danger" *ngIf="pMech.userId==currUser.id" (click)="onpMechDelete(pMech.id)">Delete</button></td>
        </tr>
      </table>
    </div>
    <br>
    <br>
    <br>
    <div *ngIf="currUser.status==1">
    <h1>Enemy pilot builds</h1>
      <table class="table">
        <tr class="info">
          <th>Tier</th>
          <th>Archetype</th>
          <th>HP</th>
          <th>AC</th>
          <th>Actions</th>
          <th>Luck</th>
          <th></th>
        </tr>
        <tr class="gray"   *ngFor="let ePilot of ePilots">
          <td>{{ePilot.ePilotTier}}</td>
          <td class="highlight" [routerLink]="[ePilot.id]">{{ePilot.ePilotType}}</td>
          <td>{{ePilot.ePilotHP}}</td>
          <td>{{ePilot.ePilotAC}}</td>
          <td>{{ePilot.ePilotTURN}}</td>
          <td>{{ePilot.ePilotLCK}}</td>
          <td><button class="btn btn-danger" *ngIf="ePilot.userId==currUser.id" (click)="onePilotDelete(ePilot.id)">Delete</button></td>
        </tr>
      </table>
      <br>
      <br>
      <br>
    </div>
    <div *ngIf="currUser.status==1">
    <h1>Enemy mech builds</h1>
      <table class="table">
        <tr class="info"> 
          <th>Tier</th>
          <th>Archetype</th>
          <th>HP</th>
          <th>AC</th>
          <th>Actions</th>
          <th>Core</th>
          <th></th>
        </tr>
        <tr class="gray"   *ngFor="let eMech of eMechs">
          <td>{{eMech.eMechTier}}</td>
          <td class="highlight" [routerLink]="[eMech.id]">{{eMech.eMechType}}</td>
          <td>{{eMech.eMechHP}}</td>
          <td>{{eMech.eMechAC}}</td>
          <td>{{eMech.eMechTURN}}</td>
          <td>{{eMech.eMechCore}}</td>
          <td><button class="btn btn-danger" *ngIf="eMech.userId==currUser.id" (click)="oneMechDelete(eMech.id)">Delete</button></td>
        </tr>
      </table>
      <br>
    </div>
    <button class="btn btn-success" [routerLink]="['/builder']">Create a build</button>
  </section>
  <aside>
    <h2>User intel:</h2><br><br>
    <p>Username: {{currUser.username}}</p><br>
    <p>E-mail: {{currUser.email}}</p><br>
    <p>Name: {{currUser.name}}</p><br>
    <p *ngIf="currUser.status==0">Status: player</p>
    <p *ngIf="currUser.status==1">Status: game master</p><br>
    <button class="btn btn-danger" (click)="logout()">LOG OUT</button>
  </aside>
  <div id="cleaner"></div>
</main>